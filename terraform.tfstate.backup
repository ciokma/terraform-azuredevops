{
  "version": 4,
  "terraform_version": "1.7.3",
  "serial": 29,
  "lineage": "856b9e50-2b99-7800-7210-2a51c293a145",
  "outputs": {
    "db_connection_string_secret": {
      "value": "name-proxy-connection-string",
      "type": "string"
    },
    "db_connection_string_value": {
      "value": "postgresql+psycop2://user:59bLxgYfXQLu@nameproxydb.postgres.database.azure.com:5432/nameproxydb",
      "type": "string",
      "sensitive": true
    },
    "key_vault_id": {
      "value": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.KeyVault/vaults/kvnameproxy",
      "type": "string"
    },
    "master_key_secret_uri": {
      "value": "https://kvnameproxy.vault.azure.net/secrets/name-proxy-master-key/cabb7ac76899494099ad8a290a94f4dd",
      "type": "string"
    },
    "postgres_admin_username": {
      "value": "user",
      "type": "string"
    },
    "postgres_server_fqdn": {
      "value": "nameproxydb.postgres.database.azure.com",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "azurerm_client_config",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "client_id": "04b07795-8ddb-461a-bbee-02f9e1bf7b46",
            "id": "Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9ODg4ZjgwMzYtM2I0Mi00YzNhLWE5MWUtNjhkZmQxZDFiMzFiO3N1YnNjcmlwdGlvbklkPWY5NzAzZjViLTgzYTMtNGQxZS05ODcyLWU0YjU5ZTUwZGU2ZTt0ZW5hbnRJZD1hYjgzN2ExMi1mZDcwLTQ0NWEtOTJmNy03ODBmODE1ZTExNWU=",
            "object_id": "888f8036-3b42-4c3a-a91e-68dfd1d1b31b",
            "subscription_id": "f9703f5b-83a3-4d1e-9872-e4b59e50de6e",
            "tenant_id": "ab837a12-fd70-445a-92f7-780f815e115e",
            "timeouts": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_key_vault",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "access_policy": [
              {
                "application_id": "",
                "certificate_permissions": [
                  "Get",
                  "List",
                  "Update",
                  "Create",
                  "Import",
                  "Delete",
                  "Recover",
                  "Backup",
                  "Restore",
                  "ManageContacts",
                  "ManageIssuers",
                  "GetIssuers",
                  "ListIssuers",
                  "SetIssuers",
                  "DeleteIssuers"
                ],
                "key_permissions": [
                  "Get",
                  "List",
                  "Update",
                  "Create",
                  "Import",
                  "Delete",
                  "Recover",
                  "Backup",
                  "Restore",
                  "GetRotationPolicy",
                  "SetRotationPolicy",
                  "Rotate"
                ],
                "object_id": "888f8036-3b42-4c3a-a91e-68dfd1d1b31b",
                "secret_permissions": [
                  "Get",
                  "List",
                  "Set",
                  "Delete",
                  "Recover",
                  "Backup",
                  "Restore"
                ],
                "storage_permissions": [],
                "tenant_id": "ab837a12-fd70-445a-92f7-780f815e115e"
              }
            ],
            "contact": [],
            "enable_rbac_authorization": false,
            "enabled_for_deployment": false,
            "enabled_for_disk_encryption": false,
            "enabled_for_template_deployment": false,
            "id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.KeyVault/vaults/kvnameproxy",
            "location": "mexicocentral",
            "name": "kvnameproxy",
            "network_acls": [
              {
                "bypass": "AzureServices",
                "default_action": "Allow",
                "ip_rules": [],
                "virtual_network_subnet_ids": []
              }
            ],
            "public_network_access_enabled": true,
            "purge_protection_enabled": false,
            "resource_group_name": "NetworkWatcherRG",
            "sku_name": "standard",
            "soft_delete_retention_days": 7,
            "tags": {},
            "tenant_id": "ab837a12-fd70-445a-92f7-780f815e115e",
            "timeouts": null,
            "vault_uri": "https://kvnameproxy.vault.azure.net/"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIyIn0=",
          "dependencies": [
            "data.azurerm_client_config.current"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_key_vault_secret",
      "name": "acr_admin_password",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content_type": "",
            "expiration_date": null,
            "id": "https://kvnameproxy.vault.azure.net/secrets/acr-admin-password/9048450babaa464aab6b278ee303e38a",
            "key_vault_id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.KeyVault/vaults/kvnameproxy",
            "name": "acr-admin-password",
            "not_before_date": null,
            "resource_id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.KeyVault/vaults/kvnameproxy/secrets/acr-admin-password/versions/9048450babaa464aab6b278ee303e38a",
            "resource_versionless_id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.KeyVault/vaults/kvnameproxy/secrets/acr-admin-password",
            "tags": {},
            "timeouts": null,
            "value": "H#PZzn}E8qu@s7zy8?_W",
            "value_wo": null,
            "value_wo_version": 0,
            "version": "9048450babaa464aab6b278ee303e38a",
            "versionless_id": "https://kvnameproxy.vault.azure.net/secrets/acr-admin-password"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "value"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_key_vault.main",
            "data.azurerm_client_config.current",
            "random_password.acr_admin_password"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_key_vault_secret",
      "name": "name_proxy_db_connection_string",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content_type": "",
            "expiration_date": null,
            "id": "https://kvnameproxy.vault.azure.net/secrets/name-proxy-connection-string/283e471c110e4e1a97d9cf47743124ae",
            "key_vault_id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.KeyVault/vaults/kvnameproxy",
            "name": "name-proxy-connection-string",
            "not_before_date": null,
            "resource_id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.KeyVault/vaults/kvnameproxy/secrets/name-proxy-connection-string/versions/283e471c110e4e1a97d9cf47743124ae",
            "resource_versionless_id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.KeyVault/vaults/kvnameproxy/secrets/name-proxy-connection-string",
            "tags": {},
            "timeouts": null,
            "value": "postgresql+psycop2://user:59bLxgYfXQLu@nameproxydb.postgres.database.azure.com:5432/nameproxydb",
            "value_wo": null,
            "value_wo_version": 0,
            "version": "283e471c110e4e1a97d9cf47743124ae",
            "versionless_id": "https://kvnameproxy.vault.azure.net/secrets/name-proxy-connection-string"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "value"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_key_vault.main",
            "azurerm_postgresql_flexible_server.name_proxy_db",
            "azurerm_postgresql_flexible_server_database.name_proxy_db",
            "data.azurerm_client_config.current",
            "random_password.name_proxy_db_password"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_key_vault_secret",
      "name": "name_proxy_db_password",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content_type": "",
            "expiration_date": null,
            "id": "https://kvnameproxy.vault.azure.net/secrets/name-proxy-db-key/c04cdd5b549b4a469be79c5320c4a888",
            "key_vault_id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.KeyVault/vaults/kvnameproxy",
            "name": "name-proxy-db-key",
            "not_before_date": null,
            "resource_id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.KeyVault/vaults/kvnameproxy/secrets/name-proxy-db-key/versions/c04cdd5b549b4a469be79c5320c4a888",
            "resource_versionless_id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.KeyVault/vaults/kvnameproxy/secrets/name-proxy-db-key",
            "tags": {},
            "timeouts": null,
            "value": "59bLxgYfXQLu",
            "value_wo": null,
            "value_wo_version": 0,
            "version": "c04cdd5b549b4a469be79c5320c4a888",
            "versionless_id": "https://kvnameproxy.vault.azure.net/secrets/name-proxy-db-key"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "value"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_key_vault.main",
            "data.azurerm_client_config.current",
            "random_password.name_proxy_db_password"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_key_vault_secret",
      "name": "name_proxy_master_key",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content_type": "",
            "expiration_date": null,
            "id": "https://kvnameproxy.vault.azure.net/secrets/name-proxy-master-key/cabb7ac76899494099ad8a290a94f4dd",
            "key_vault_id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.KeyVault/vaults/kvnameproxy",
            "name": "name-proxy-master-key",
            "not_before_date": null,
            "resource_id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.KeyVault/vaults/kvnameproxy/secrets/name-proxy-master-key/versions/cabb7ac76899494099ad8a290a94f4dd",
            "resource_versionless_id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.KeyVault/vaults/kvnameproxy/secrets/name-proxy-master-key",
            "tags": {},
            "timeouts": null,
            "value": "sk-TN7ItTo0Pf9xoFj4j62ySi4m8VdzbYmV",
            "value_wo": null,
            "value_wo_version": 0,
            "version": "cabb7ac76899494099ad8a290a94f4dd",
            "versionless_id": "https://kvnameproxy.vault.azure.net/secrets/name-proxy-master-key"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "value"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_key_vault.main",
            "data.azurerm_client_config.current",
            "random_password.name_proxy_master_key"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_postgresql_flexible_server",
      "name": "name_proxy_db",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "administrator_login": "user",
            "administrator_password": "59bLxgYfXQLu",
            "administrator_password_wo": null,
            "administrator_password_wo_version": 0,
            "authentication": [
              {
                "active_directory_auth_enabled": false,
                "password_auth_enabled": true,
                "tenant_id": ""
              }
            ],
            "auto_grow_enabled": false,
            "backup_retention_days": 7,
            "create_mode": null,
            "customer_managed_key": [],
            "delegated_subnet_id": "",
            "fqdn": "nameproxydb.postgres.database.azure.com",
            "geo_redundant_backup_enabled": false,
            "high_availability": [],
            "id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.DBforPostgreSQL/flexibleServers/nameproxydb",
            "identity": [],
            "location": "mexicocentral",
            "maintenance_window": [],
            "name": "nameproxydb",
            "point_in_time_restore_time_in_utc": null,
            "private_dns_zone_id": "",
            "public_network_access_enabled": true,
            "replication_role": "",
            "resource_group_name": "NetworkWatcherRG",
            "sku_name": "GP_Standard_D4s_v3",
            "source_server_id": null,
            "storage_mb": 32768,
            "storage_tier": "P4",
            "tags": {},
            "timeouts": null,
            "version": "13",
            "zone": "1"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "administrator_password"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozNjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "random_password.name_proxy_db_password"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_postgresql_flexible_server_database",
      "name": "name_proxy_db",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "charset": "UTF8",
            "collation": "en_US.utf8",
            "id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.DBforPostgreSQL/flexibleServers/nameproxydb/databases/nameproxydb",
            "name": "nameproxydb",
            "server_id": "/subscriptions/f9703f5b-83a3-4d1e-9872-e4b59e50de6e/resourceGroups/NetworkWatcherRG/providers/Microsoft.DBforPostgreSQL/flexibleServers/nameproxydb",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_postgresql_flexible_server.name_proxy_db",
            "random_password.name_proxy_db_password"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "random_password",
      "name": "acr_admin_password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 3,
          "attributes": {
            "bcrypt_hash": "$2a$10$rP57Dzmp2wkvOBse3omdFeZfJz65Lim/aqF7Rc5BPKB4AyeRZGWyK",
            "id": "none",
            "keepers": null,
            "length": 20,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "numeric": true,
            "override_special": null,
            "result": "H#PZzn}E8qu@s7zy8?_W",
            "special": true,
            "upper": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "random_password",
      "name": "name_proxy_db_password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 3,
          "attributes": {
            "bcrypt_hash": "$2a$10$XjyN7ZSmA7qY4EmbUFNveuPEdrmWmYRr0dshVp/rfr1SWP6l5UtLa",
            "id": "none",
            "keepers": null,
            "length": 12,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "numeric": true,
            "override_special": null,
            "result": "59bLxgYfXQLu",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "random_password",
      "name": "name_proxy_master_key",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 3,
          "attributes": {
            "bcrypt_hash": "$2a$10$Yv6sPg335fMNE/m4fyMAW.k/XhRTZiq4SVWUz1bl3Ksxh0QuuB6La",
            "id": "none",
            "keepers": null,
            "length": 32,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "numeric": true,
            "override_special": null,
            "result": "TN7ItTo0Pf9xoFj4j62ySi4m8VdzbYmV",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": []
        }
      ]
    }
  ],
  "check_results": null
}
